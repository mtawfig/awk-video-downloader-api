const formatInput = require('./formatInput');

describe('formatInput', () => {
  const normalisedForm = 'https://www.facebook.com/pg/Wingnuts-at-Georgia-Tech-214578745247617/about';
  const normalisedName = 'wingnuts-at-georgia-tech-214578745247617';

  it('formats Wingnuts-at-Georgia-Tech-214578745247617', () => {
    const str = 'Wingnuts-at-Georgia-Tech-214578745247617';
    expect(formatInput(str).url).to.equal(normalisedForm);
    expect(formatInput(str).normalised).to.equal(normalisedName);
  });

  it('formats https://www.facebook.com/Wingnuts-at-Georgia-Tech-214578745247617', () => {
    const str = 'https://www.facebook.com/Wingnuts-at-Georgia-Tech-214578745247617';
    expect(formatInput(str).url).to.equal(normalisedForm);
    expect(formatInput(str).normalised).to.equal(normalisedName);
  });

  it('formats https://www.facebook.com/pages/Wingnuts-at-Georgia-Tech-214578745247617', () => {
    const str = 'https://www.facebook.com/pages/Wingnuts-at-Georgia-Tech-214578745247617';
    expect(formatInput(str).url).to.equal(normalisedForm);
    expect(formatInput(str).normalised).to.equal(normalisedName);
  });

  it('formats https://www.facebook.com/pg/Wingnuts-at-Georgia-Tech-214578745247617', () => {
    const str = 'https://www.facebook.com/pg/Wingnuts-at-Georgia-Tech-214578745247617';
    expect(formatInput(str).url).to.equal(normalisedForm);
    expect(formatInput(str).normalised).to.equal(normalisedName);
  });

  it('formats https://www.facebook.com/pg/Wingnuts-at-Georgia-Tech-214578745247617/', () => {
    const str = 'https://www.facebook.com/pg/Wingnuts-at-Georgia-Tech-214578745247617/';
    expect(formatInput(str).url).to.equal(normalisedForm);
    expect(formatInput(str).normalised).to.equal(normalisedName);
  });

  it('formats https://www.facebook.com/pg/Wingnuts-at-Georgia-Tech-214578745247617/about', () => {
    const str = 'https://www.facebook.com/pg/Wingnuts-at-Georgia-Tech-214578745247617/about';
    expect(formatInput(str).url).to.equal(normalisedForm);
    expect(formatInput(str).normalised).to.equal(normalisedName);
  });

  it('formats https://www.facebook.com/pg/Wingnuts-at-Georgia-Tech-214578745247617/about/https://www.facebook.com/pg/Wingnuts-at-Georgia-Tech-214578745247617/about/?ref=page_internal', () => {
    const str = 'https://www.facebook.com/pg/Wingnuts-at-Georgia-Tech-214578745247617/about/https://www.facebook.com/pg/Wingnuts-at-Georgia-Tech-214578745247617/about/?ref=page_internal';
    expect(formatInput(str).url).to.equal(normalisedForm);
    expect(formatInput(str).normalised).to.equal(normalisedName);
  });

  it('returns null if the content is invalid', () => {
    const str = 'https://www.facebook.com//pages/Woodridge-Clinic/159676047382041';
    expect(formatInput(str)).to.be.null;
  });
});